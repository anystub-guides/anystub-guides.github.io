<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>anyStub site</title>
    <meta name="keywords"
          content="java, kotlin, stubbing, mocking, mock, mock objects, testing, tdd, unit tests, integration tests, zero effort testing, resilient tests, test automation">
    <meta name="description"
          content="A landing page for information about anystub library, a stubbing library for integration tests written in Java.">

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css"
          integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" href="uno.css">
    <link rel="shortcut icon" href="favicon.ico" type="image/x-icon">

</head>
<body>
<div>
    <div class="card">
        <div class="card-body">
    <h3>Zero efforts stubbing for your integration tests in Java</h3>
        </div>
    </div>
    <p class="d-flex">
        
        <img class="mx-auto" alt="anyStub: have a rest from writing mocks" src="https://github.com/anystub-guides/anystub-guides.github.io/raw/master/img/logo.png"/>
    </p>
    <p class="d-flex">
        <img src="https://maven-badges.herokuapp.com/maven-central/org.anystub/anystub/badge.svg" alt="Maven Central">
    
    </p>

    <div class="container">

        <h2>Why do you need it</h2>
        <ul>
            <li>
                make your app independent from external data sources
            </li>
            <li>
                test classes, subsystems or the whole app against real data
            </li>
            <li>
                zero efforts to collect test data
            </li>
            <li>
                make your tests autonomous and running at any isolated build server
            </li>
        </ul>
        <p> anyStub provides simple API and requires minimum code overhead to get benefits.</p>
    </div>


    <div class="container">
        <h2> How to cook it</h2>
        <p>Out of box anyStub supports stubbing http and jdbc connections. To stub your connection you need to wrap
            your connection with a wrapper and let it work. For stubbing http connection use <code>org.anystub.http.StubHttpClient</code>, 
            for jdbc dataSources <code>org.anystub.jdbc.StubDataSource</code>. In real a project, you rarely create the objects. More likely you have to 
            create/configure a builder or a factory which will create the connections or even spring-boot will create everything for you. 
            Examples below demonstrate how to stub real connections in the cases.
            
        </p>
        
        <p> Once you stub the connections all external calls will appear in a default-stub file <code>src/test/resources/anystub/stub.yml</code>
            Sometimes you need to split the calls by different stub-files. You can utilize <code>@AnystubId</code> annotation. It's a class/method level annotation.
            You can put it with your test class/test method to route all calls under the annotation in a distinct file. By default, the file has a name of
            <code>TestClassName.yml/TestMethodName.yml</code> and puts in src/test/resources/anystub/. The annotation has a parameter "filename" to 
                give the file a specific name. The extension '.yml' will be added automatically
        </p>

        <ul>
            <li>
                here is <a href="https://github.com/anystub-guides/gs-relational-data-access/commit/1724f93e61963ba4af2a8fdea7f7372fba6e3ed1#diff-0af5c5417079e9c845c27e8102b06188R1">an example</a>
                of how to cover <a href="https://spring.io/guides/gs/relational-data-access/">Accessing
                Relational Data using JDBC with Spring</a> from
                spring-boot guides with integration tests.
            </li>
            <li>
                here is <a href="https://github.com/anystub-guides/gs-consuming-rest/commit/0dd943f6495e87684f3392387b9a5a5e2a846263">an example</a>
                of how to stub http connections in tests <a href="https://spring.io/guides/gs/consuming-rest/">Consuming a RESTful Web Service</a> from
                spring-boot guides with integration tests.
            </li>
        </ul>

        <p>
            AnyStub library is developed for spring-boot applications to stub external communication although you can
            setup correspondent bean for standard spring application with a configuration in .xml files.
        </p>
        <p>

            You can stub any communication between objects in your plain-java application. Here is <a href="https://github.com/anystub/anystub/blob/anystub-0.2.22/src/test/java/org/anystub/it/WorkerEasyTest.java">an example</a>
            of how to extend your class's method <code>get()</code> to make it stubbing method.
        </p>
        
        <h4> Remember </h4>
        <ul>
            <li>
                Stubbing inconsistent systems, unstable components and timely available resources is a good idea
            </li>
            
            <li>Stubbing objects which work with simple stateless types is easy</li>
            <li>Stubbing low level objects which works behind several levels of absrtactions will increase coverage</li>
            <li>Split and reuse your stubs among tests wisely</li>
            
        </ul>
    </div>
     <div class="container">
        <h2> Become a cheef</h2>
    <p>In examples above, the stub files were created with <code>RequestMode.rmNew</code> attribute we didn't specify any. That means all calls will be assessed against the stub files. 
        In case of the call is found in the file the result will be recovered from file and the hit of the real system will be procrasinated (or maybe omitted if not required).
        Duplicates of the calls do not appear in the stub-file.
        If anystub failed to match the call it will call the target system, keep the call id and results in the stub and recover the result for the caller.
         </p>
         <p>
         AnyStub provides few more modes to proceed calls:
         </p>
         <ul>
             <li><code>RequestMode.rmNone</code>
                 Sending requests to a real system is forbidden. If request is not found in a stub-file then exception is thrown
                 </li>
             <li><code>RequestMode.rmTrack</code>
                 If the stub file just created all requests are recorderd in the stub file (even if duplicated exists). If the stub-file exists 
                 sending requests to a real system is forbidden. Calls are expected exactly in the same order as it was on a record phase.
                 If next call doesn't match records in the stub-file the exception thrown.
                 </li>
             <li><code>RequestMode.rmAll</code>
                 The Stub file clear on the first call. All requests are sent to a real system and results written to the stub-file. Duplicated are possible.
                 </li>
             <li><code>RequestMode.rmPassThrough</code>
                 all calls go directly to a real system.
                 </li>
         </ul>
         
         
    </div>
</div>
</body>
</html>
